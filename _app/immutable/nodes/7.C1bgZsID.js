import{S as he,i as de,s as me,d as h,m as Z,o as z,p as q,a as I,b as Y,c,q as ee,r as _,e as p,f as v,g as N,h as F,u as te,j as g,t as P,k as M,v as se,l as _e,w as pe,x as oe,y as ce,z as ie,A as fe,n as ue}from"../chunks/NsQJeN-P.js";import{e as ae}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{a as ge}from"../chunks/wNcDi108.js";import{t as ve}from"../chunks/DeQdh4OB.js";import{C as $e}from"../chunks/zpRN7SsM.js";import{S as be,E as ke}from"../chunks/B-7tLdll.js";import{L as Ee}from"../chunks/CNws08Eq.js";function le(r,e,s){const t=r.slice();return t[9]=e[s],t}function Te(r,e,s){const t=r.slice();return t[6]=e[s],t[8]=s,t}function we(r){let e,s,t,a,u=r[3]("messages.sender")+"",o,b,n,i=r[3]("messages.recipient")+"",$,R,S,D=r[3]("messages.type")+"",H,V,A,K="Value",L,y,x=r[3]("messages.timestamp")+"",B,j,w,E,C=ae(r[0]),f=[];for(let l=0;l<C.length;l+=1)f[l]=re(le(r,C,l));const k=l=>z(f[l],1,1,()=>{f[l]=null});return{c(){e=g("table"),s=g("thead"),t=g("tr"),a=g("th"),o=P(u),b=M(),n=g("th"),$=P(i),R=M(),S=g("th"),H=P(D),V=M(),A=g("th"),A.textContent=K,L=M(),y=g("th"),B=P(x),j=M(),w=g("tbody");for(let l=0;l<f.length;l+=1)f[l].c();this.h()},l(l){e=p(l,"TABLE",{class:!0});var d=v(e);s=p(d,"THEAD",{class:!0});var m=v(s);t=p(m,"TR",{});var T=v(t);a=p(T,"TH",{class:!0});var G=v(a);o=N(G,u),G.forEach(h),b=F(T),n=p(T,"TH",{class:!0});var J=v(n);$=N(J,i),J.forEach(h),R=F(T),S=p(T,"TH",{class:!0});var Q=v(S);H=N(Q,D),Q.forEach(h),V=F(T),A=p(T,"TH",{class:!0,"data-svelte-h":!0}),fe(A)!=="svelte-uwxecl"&&(A.textContent=K),L=F(T),y=p(T,"TH",{class:!0});var U=v(y);B=N(U,x),U.forEach(h),T.forEach(h),m.forEach(h),j=F(d),w=p(d,"TBODY",{class:!0});var W=v(w);for(let O=0;O<f.length;O+=1)f[O].l(W);W.forEach(h),d.forEach(h),this.h()},h(){_(a,"class","table-th"),_(n,"class","table-th"),_(S,"class","table-th"),_(A,"class","table-th"),_(y,"class","table-th"),_(s,"class","table-header"),_(w,"class","table-body"),_(e,"class","data-table")},m(l,d){Y(l,e,d),c(e,s),c(s,t),c(t,a),c(a,o),c(t,b),c(t,n),c(n,$),c(t,R),c(t,S),c(S,H),c(t,V),c(t,A),c(t,L),c(t,y),c(y,B),c(e,j),c(e,w);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(w,null);E=!0},p(l,d){if((!E||d&8)&&u!==(u=l[3]("messages.sender")+"")&&I(o,u),(!E||d&8)&&i!==(i=l[3]("messages.recipient")+"")&&I($,i),(!E||d&8)&&D!==(D=l[3]("messages.type")+"")&&I(H,D),(!E||d&8)&&x!==(x=l[3]("messages.timestamp")+"")&&I(B,x),d&1){C=ae(l[0]);let m;for(m=0;m<C.length;m+=1){const T=le(l,C,m);f[m]?(f[m].p(T,d),q(f[m],1)):(f[m]=re(T),f[m].c(),q(f[m],1),f[m].m(w,null))}for(oe(),m=C.length;m<f.length;m+=1)k(m);ce()}},i(l){if(!E){for(let d=0;d<C.length;d+=1)q(f[d]);E=!0}},o(l){f=f.filter(Boolean);for(let d=0;d<f.length;d+=1)z(f[d]);E=!1},d(l){l&&h(e),ie(f,l)}}}function ye(r){let e,s;return e=new ke({props:{title:"Failed to load messages",message:r[2],onRetry:r[5]}}),{c(){se(e.$$.fragment)},l(t){te(e.$$.fragment,t)},m(t,a){ee(e,t,a),s=!0},p(t,a){const u={};a&4&&(u.message=t[2]),e.$set(u)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function De(r){let e,s;return e=new be({props:{$$slots:{default:[He]},$$scope:{ctx:r}}}),{c(){se(e.$$.fragment)},l(t){te(e.$$.fragment,t)},m(t,a){ee(e,t,a),s=!0},p(t,a){const u={};a&4096&&(u.$$scope={dirty:a,ctx:t}),e.$set(u)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function re(r){let e,s,t,a=X(r[9].from)+"",u,o,b,n,i,$=X(r[9].to)+"",R,S,D,H,V=r[9].type+"",A,K,L,y,x=ne(r[9].value)+"",B,j,w,E,C,f;return E=new Ee({props:{timestamp:Math.floor(r[9].timestamp.getTime()/1e3),className:"time-text"}}),{c(){e=g("tr"),s=g("td"),t=g("a"),u=P(a),b=M(),n=g("td"),i=g("span"),R=P($),S=M(),D=g("td"),H=g("span"),A=P(V),K=M(),L=g("td"),y=g("span"),B=P(x),j=M(),w=g("td"),se(E.$$.fragment),C=M(),this.h()},l(k){e=p(k,"TR",{class:!0});var l=v(e);s=p(l,"TD",{class:!0});var d=v(s);t=p(d,"A",{href:!0,class:!0});var m=v(t);u=N(m,a),m.forEach(h),d.forEach(h),b=F(l),n=p(l,"TD",{class:!0});var T=v(n);i=p(T,"SPAN",{class:!0});var G=v(i);R=N(G,$),G.forEach(h),T.forEach(h),S=F(l),D=p(l,"TD",{class:!0});var J=v(D);H=p(J,"SPAN",{class:!0});var Q=v(H);A=N(Q,V),Q.forEach(h),J.forEach(h),K=F(l),L=p(l,"TD",{class:!0});var U=v(L);y=p(U,"SPAN",{class:!0});var W=v(y);B=N(W,x),W.forEach(h),U.forEach(h),j=F(l),w=p(l,"TD",{class:!0});var O=v(w);te(E.$$.fragment,O),O.forEach(h),C=F(l),l.forEach(h),this.h()},h(){_(t,"href",o="/messages/"+r[9].id),_(t,"class","address-text hover:text-primary-600"),_(s,"class","table-td"),_(i,"class","address-text"),_(n,"class","table-td"),_(H,"class","text-primary-500 font-medium"),_(D,"class","table-td"),_(y,"class","font-semibold text-primary"),_(L,"class","table-td"),_(w,"class","table-td"),_(e,"class","table-row")},m(k,l){Y(k,e,l),c(e,s),c(s,t),c(t,u),c(e,b),c(e,n),c(n,i),c(i,R),c(e,S),c(e,D),c(D,H),c(H,A),c(e,K),c(e,L),c(L,y),c(y,B),c(e,j),c(e,w),ee(E,w,null),c(e,C),f=!0},p(k,l){(!f||l&1)&&a!==(a=X(k[9].from)+"")&&I(u,a),(!f||l&1&&o!==(o="/messages/"+k[9].id))&&_(t,"href",o),(!f||l&1)&&$!==($=X(k[9].to)+"")&&I(R,$),(!f||l&1)&&V!==(V=k[9].type+"")&&I(A,V),(!f||l&1)&&x!==(x=ne(k[9].value)+"")&&I(B,x);const d={};l&1&&(d.timestamp=Math.floor(k[9].timestamp.getTime()/1e3)),E.$set(d)},i(k){f||(q(E.$$.fragment,k),f=!0)},o(k){z(E.$$.fragment,k),f=!1},d(k){k&&h(e),Z(E)}}}function Ae(r){let e,s='<div class="skeleton skeleton-text w-24"></div> <div class="skeleton skeleton-text w-24"></div> <div class="skeleton skeleton-text w-20"></div> <div class="skeleton skeleton-text flex-1"></div> <div class="skeleton skeleton-text w-24"></div> ';return{c(){e=g("div"),e.innerHTML=s,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1uqwzfx"&&(e.innerHTML=s),this.h()},h(){_(e,"class","flex gap-4")},m(t,a){Y(t,e,a)},p:ue,d(t){t&&h(e)}}}function He(r){let e,s=ae(Array(10)),t=[];for(let a=0;a<s.length;a+=1)t[a]=Ae(Te(r,s,a));return{c(){e=g("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=p(a,"DIV",{class:!0});var u=v(e);for(let o=0;o<t.length;o+=1)t[o].l(u);u.forEach(h),this.h()},h(){_(e,"class","p-6 space-y-4")},m(a,u){Y(a,e,u);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p:ue,d(a){a&&h(e),ie(t,a)}}}function xe(r){let e,s,t,a;const u=[De,ye,we],o=[];function b(n,i){return n[1]?0:n[2]?1:2}return s=b(r),t=o[s]=u[s](r),{c(){e=g("div"),t.c(),this.h()},l(n){e=p(n,"DIV",{class:!0});var i=v(e);t.l(i),i.forEach(h),this.h()},h(){_(e,"class","table-wrapper")},m(n,i){Y(n,e,i),o[s].m(e,null),a=!0},p(n,i){let $=s;s=b(n),s===$?o[s].p(n,i):(oe(),z(o[$],1,1,()=>{o[$]=null}),ce(),t=o[s],t?t.p(n,i):(t=o[s]=u[s](n),t.c()),q(t,1),t.m(e,null))},i(n){a||(q(t),a=!0)},o(n){z(t),a=!1},d(n){n&&h(e),o[s].d()}}}function Ce(r){let e,s,t=r[3]("messages.title")+"",a,u,o,b;return o=new $e({props:{$$slots:{default:[xe]},$$scope:{ctx:r}}}),{c(){e=g("div"),s=g("h1"),a=P(t),u=M(),se(o.$$.fragment),this.h()},l(n){e=p(n,"DIV",{class:!0});var i=v(e);s=p(i,"H1",{class:!0});var $=v(s);a=N($,t),$.forEach(h),u=F(i),te(o.$$.fragment,i),i.forEach(h),this.h()},h(){_(s,"class","page-title"),_(e,"class","page-container")},m(n,i){Y(n,e,i),c(e,s),c(s,a),c(e,u),ee(o,e,null),b=!0},p(n,[i]){(!b||i&8)&&t!==(t=n[3]("messages.title")+"")&&I(a,t);const $={};i&4111&&($.$$scope={dirty:i,ctx:n}),o.$set($)},i(n){b||(q(o.$$.fragment,n),b=!0)},o(n){z(o.$$.fragment,n),b=!1},d(n){n&&h(e),Z(o)}}}function X(r){return`${r.substring(0,8)}...${r.substring(r.length-6)}`}function ne(r){if(!r||r==="0")return"0";const e=parseFloat(r);return e>=1e9?`${(e/1e9).toFixed(2)}B`:e>=1e6?`${(e/1e6).toFixed(2)}M`:e>=1e3?`${(e/1e3).toFixed(2)}K`:e.toFixed(4)}function Fe(r,e,s){let t,a;_e(r,ve,i=>s(4,a=i));let u=[],o=!0,b=null;pe(async()=>{try{s(0,u=await ge())}catch(i){s(2,b=i instanceof Error?i.message:"Failed to load messages")}finally{s(1,o=!1)}});const n=()=>window.location.reload();return r.$$.update=()=>{r.$$.dirty&16&&s(3,t=a)},[u,o,b,t,a,n]}class qe extends he{constructor(e){super(),de(this,e,Fe,Ce,me,{})}}export{qe as component};
