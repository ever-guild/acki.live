import{S as be,i as $e,s as ke,d as u,m as oe,o as U,p as K,a as y,b as O,c as i,q as ne,r as m,e as p,f as g,g as w,h as S,u as ce,j as v,t as D,k as C,v as fe,l as Ee,w as Te,x as de,y as pe,z as ve,n as ge,A as ye}from"../chunks/TqEO6J7Z.js";import{e as ie}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{g as we}from"../chunks/C0htPYIV.js";import{t as De}from"../chunks/DlufknT5.js";import{C as Ae}from"../chunks/CVJ17vuL.js";import{S as He,E as Se}from"../chunks/C__lb20K.js";import{f as ue,a as he,L as Ce,b as re}from"../chunks/DZn99lnK.js";import"../chunks/dOC9I46v.js";function me(o,e,l){const t=o.slice();return t[9]=e[l],t}function Ie(o,e,l){const t=o.slice();return t[6]=e[l],t[8]=l,t}function Le(o){let e,l,t,a,n=o[3]("common.messageId")+"",s,k,f,h=o[3]("common.from")+"",$,V,q,I=o[3]("common.to")+"",B,Y,N,G=o[3]("common.type")+"",P,R,L,F=o[3]("common.value")+"",Q,j,T,J=o[3]("common.time")+"",A,W,M,b,z=ie(o[0]),_=[];for(let r=0;r<z.length;r+=1)_[r]=_e(me(o,z,r));const H=r=>U(_[r],1,1,()=>{_[r]=null});return{c(){e=v("table"),l=v("thead"),t=v("tr"),a=v("th"),s=D(n),k=C(),f=v("th"),$=D(h),V=C(),q=v("th"),B=D(I),Y=C(),N=v("th"),P=D(G),R=C(),L=v("th"),Q=D(F),j=C(),T=v("th"),A=D(J),W=C(),M=v("tbody");for(let r=0;r<_.length;r+=1)_[r].c();this.h()},l(r){e=p(r,"TABLE",{class:!0});var c=g(e);l=p(c,"THEAD",{class:!0});var d=g(l);t=p(d,"TR",{});var E=g(t);a=p(E,"TH",{class:!0});var Z=g(a);s=w(Z,n),Z.forEach(u),k=S(E),f=p(E,"TH",{class:!0});var x=g(f);$=w(x,h),x.forEach(u),V=S(E),q=p(E,"TH",{class:!0});var ee=g(q);B=w(ee,I),ee.forEach(u),Y=S(E),N=p(E,"TH",{class:!0});var te=g(N);P=w(te,G),te.forEach(u),R=S(E),L=p(E,"TH",{class:!0});var le=g(L);Q=w(le,F),le.forEach(u),j=S(E),T=p(E,"TH",{class:!0});var ae=g(T);A=w(ae,J),ae.forEach(u),E.forEach(u),d.forEach(u),W=S(c),M=p(c,"TBODY",{class:!0});var se=g(M);for(let X=0;X<_.length;X+=1)_[X].l(se);se.forEach(u),c.forEach(u),this.h()},h(){m(a,"class","table-th"),m(f,"class","table-th"),m(q,"class","table-th"),m(N,"class","table-th"),m(L,"class","table-th"),m(T,"class","table-th"),m(l,"class","table-header"),m(M,"class","table-body"),m(e,"class","data-table")},m(r,c){O(r,e,c),i(e,l),i(l,t),i(t,a),i(a,s),i(t,k),i(t,f),i(f,$),i(t,V),i(t,q),i(q,B),i(t,Y),i(t,N),i(N,P),i(t,R),i(t,L),i(L,Q),i(t,j),i(t,T),i(T,A),i(e,W),i(e,M);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(M,null);b=!0},p(r,c){if((!b||c&8)&&n!==(n=r[3]("common.messageId")+"")&&y(s,n),(!b||c&8)&&h!==(h=r[3]("common.from")+"")&&y($,h),(!b||c&8)&&I!==(I=r[3]("common.to")+"")&&y(B,I),(!b||c&8)&&G!==(G=r[3]("common.type")+"")&&y(P,G),(!b||c&8)&&F!==(F=r[3]("common.value")+"")&&y(Q,F),(!b||c&8)&&J!==(J=r[3]("common.time")+"")&&y(A,J),c&9){z=ie(r[0]);let d;for(d=0;d<z.length;d+=1){const E=me(r,z,d);_[d]?(_[d].p(E,c),K(_[d],1)):(_[d]=_e(E),_[d].c(),K(_[d],1),_[d].m(M,null))}for(de(),d=z.length;d<_.length;d+=1)H(d);pe()}},i(r){if(!b){for(let c=0;c<z.length;c+=1)K(_[c]);b=!0}},o(r){_=_.filter(Boolean);for(let c=0;c<_.length;c+=1)U(_[c]);b=!1},d(r){r&&u(e),ve(_,r)}}}function Me(o){let e,l;return e=new Se({props:{title:"Failed to load messages",message:o[2],onRetry:o[5]}}),{c(){fe(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,a){ne(e,t,a),l=!0},p(t,a){const n={};a&4&&(n.message=t[2]),e.$set(n)},i(t){l||(K(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function Be(o){let e,l;return e=new He({props:{$$slots:{default:[Fe]},$$scope:{ctx:o}}}),{c(){fe(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,a){ne(e,t,a),l=!0},p(t,a){const n={};a&4096&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){l||(K(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function Ne(o){let e=o[3]("common.external")+"",l;return{c(){l=D(e)},l(t){l=w(t,e)},m(t,a){O(t,l,a)},p(t,a){a&8&&e!==(e=t[3]("common.external")+"")&&y(l,e)},d(t){t&&u(l)}}}function Pe(o){let e,l=re(o[9].from)+"",t,a;return{c(){e=v("a"),t=D(l),this.h()},l(n){e=p(n,"A",{href:!0,class:!0});var s=g(e);t=w(s,l),s.forEach(u),this.h()},h(){m(e,"href",a="/accounts/"+o[9].from),m(e,"class","hover:text-primary-600")},m(n,s){O(n,e,s),i(e,t)},p(n,s){s&1&&l!==(l=re(n[9].from)+"")&&y(t,l),s&1&&a!==(a="/accounts/"+n[9].from)&&m(e,"href",a)},d(n){n&&u(e)}}}function Ve(o){let e=o[3]("common.external")+"",l;return{c(){l=D(e)},l(t){l=w(t,e)},m(t,a){O(t,l,a)},p(t,a){a&8&&e!==(e=t[3]("common.external")+"")&&y(l,e)},d(t){t&&u(l)}}}function qe(o){let e,l=re(o[9].to)+"",t,a;return{c(){e=v("a"),t=D(l),this.h()},l(n){e=p(n,"A",{href:!0,class:!0});var s=g(e);t=w(s,l),s.forEach(u),this.h()},h(){m(e,"href",a="/accounts/"+o[9].to),m(e,"class","hover:text-primary-600")},m(n,s){O(n,e,s),i(e,t)},p(n,s){s&1&&l!==(l=re(n[9].to)+"")&&y(t,l),s&1&&a!==(a="/accounts/"+n[9].to)&&m(e,"href",a)},d(n){n&&u(e)}}}function _e(o){let e,l,t,a=ue(o[9].id)+"",n,s,k,f,h,$,V,q,I,B,Y=o[9].type+"",N,G,P,R,L=he(o[9].value)+"",F,Q,j,T,J,A;function W(r,c){return r[9].from?Pe:Ne}let M=W(o),b=M(o);function z(r,c){return r[9].to?qe:Ve}let _=z(o),H=_(o);return T=new Ce({props:{timestamp:Math.floor(o[9].timestamp.getTime()/1e3),className:"time-text"}}),{c(){e=v("tr"),l=v("td"),t=v("a"),n=D(a),k=C(),f=v("td"),b.c(),h=C(),$=v("td"),V=v("span"),H.c(),q=C(),I=v("td"),B=v("span"),N=D(Y),G=C(),P=v("td"),R=v("span"),F=D(L),Q=C(),j=v("td"),fe(T.$$.fragment),J=C(),this.h()},l(r){e=p(r,"TR",{class:!0});var c=g(e);l=p(c,"TD",{class:!0});var d=g(l);t=p(d,"A",{href:!0,class:!0});var E=g(t);n=w(E,a),E.forEach(u),d.forEach(u),k=S(c),f=p(c,"TD",{class:!0});var Z=g(f);b.l(Z),Z.forEach(u),h=S(c),$=p(c,"TD",{class:!0});var x=g($);V=p(x,"SPAN",{});var ee=g(V);H.l(ee),ee.forEach(u),x.forEach(u),q=S(c),I=p(c,"TD",{class:!0});var te=g(I);B=p(te,"SPAN",{class:!0});var le=g(B);N=w(le,Y),le.forEach(u),te.forEach(u),G=S(c),P=p(c,"TD",{class:!0});var ae=g(P);R=p(ae,"SPAN",{class:!0});var se=g(R);F=w(se,L),se.forEach(u),ae.forEach(u),Q=S(c),j=p(c,"TD",{class:!0});var X=g(j);ce(T.$$.fragment,X),X.forEach(u),J=S(c),c.forEach(u),this.h()},h(){m(t,"href",s="/messages/"+o[9].id),m(t,"class","address-text hover:text-primary-600"),m(l,"class","table-td"),m(f,"class","table-td"),m($,"class","table-td"),m(B,"class","text-primary-500 font-medium"),m(I,"class","table-td"),m(R,"class","font-semibold text-primary"),m(P,"class","table-td"),m(j,"class","table-td"),m(e,"class","table-row")},m(r,c){O(r,e,c),i(e,l),i(l,t),i(t,n),i(e,k),i(e,f),b.m(f,null),i(e,h),i(e,$),i($,V),H.m(V,null),i(e,q),i(e,I),i(I,B),i(B,N),i(e,G),i(e,P),i(P,R),i(R,F),i(e,Q),i(e,j),ne(T,j,null),i(e,J),A=!0},p(r,c){(!A||c&1)&&a!==(a=ue(r[9].id)+"")&&y(n,a),(!A||c&1&&s!==(s="/messages/"+r[9].id))&&m(t,"href",s),M===(M=W(r))&&b?b.p(r,c):(b.d(1),b=M(r),b&&(b.c(),b.m(f,null))),_===(_=z(r))&&H?H.p(r,c):(H.d(1),H=_(r),H&&(H.c(),H.m(V,null))),(!A||c&1)&&Y!==(Y=r[9].type+"")&&y(N,Y),(!A||c&1)&&L!==(L=he(r[9].value)+"")&&y(F,L);const d={};c&1&&(d.timestamp=Math.floor(r[9].timestamp.getTime()/1e3)),T.$set(d)},i(r){A||(K(T.$$.fragment,r),A=!0)},o(r){U(T.$$.fragment,r),A=!1},d(r){r&&u(e),b.d(),H.d(),oe(T)}}}function Re(o){let e,l='<div class="skeleton skeleton-text flex-1"></div> <div class="skeleton skeleton-text flex-1"></div> <div class="skeleton skeleton-text w-20"></div> <div class="skeleton skeleton-text w-20"></div> <div class="skeleton skeleton-text w-24"></div> ';return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),ye(e)!=="svelte-64l08e"&&(e.innerHTML=l),this.h()},h(){m(e,"class","flex gap-4")},m(t,a){O(t,e,a)},p:ge,d(t){t&&u(e)}}}function Fe(o){let e,l=ie(Array(10)),t=[];for(let a=0;a<l.length;a+=1)t[a]=Re(Ie(o,l,a));return{c(){e=v("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=p(a,"DIV",{class:!0});var n=g(e);for(let s=0;s<t.length;s+=1)t[s].l(n);n.forEach(u),this.h()},h(){m(e,"class","p-6 space-y-4")},m(a,n){O(a,e,n);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p:ge,d(a){a&&u(e),ve(t,a)}}}function je(o){let e,l,t,a;const n=[Be,Me,Le],s=[];function k(f,h){return f[1]?0:f[2]?1:2}return l=k(o),t=s[l]=n[l](o),{c(){e=v("div"),t.c(),this.h()},l(f){e=p(f,"DIV",{class:!0});var h=g(e);t.l(h),h.forEach(u),this.h()},h(){m(e,"class","table-wrapper")},m(f,h){O(f,e,h),s[l].m(e,null),a=!0},p(f,h){let $=l;l=k(f),l===$?s[l].p(f,h):(de(),U(s[$],1,1,()=>{s[$]=null}),pe(),t=s[l],t?t.p(f,h):(t=s[l]=n[l](f),t.c()),K(t,1),t.m(e,null))},i(f){a||(K(t),a=!0)},o(f){U(t),a=!1},d(f){f&&u(e),s[l].d()}}}function ze(o){let e,l,t=o[3]("messages.title")+"",a,n,s,k;return s=new Ae({props:{$$slots:{default:[je]},$$scope:{ctx:o}}}),{c(){e=v("div"),l=v("h1"),a=D(t),n=C(),fe(s.$$.fragment),this.h()},l(f){e=p(f,"DIV",{class:!0});var h=g(e);l=p(h,"H1",{class:!0});var $=g(l);a=w($,t),$.forEach(u),n=S(h),ce(s.$$.fragment,h),h.forEach(u),this.h()},h(){m(l,"class","page-title"),m(e,"class","page-container")},m(f,h){O(f,e,h),i(e,l),i(l,a),i(e,n),ne(s,e,null),k=!0},p(f,[h]){(!k||h&8)&&t!==(t=f[3]("messages.title")+"")&&y(a,t);const $={};h&4111&&($.$$scope={dirty:h,ctx:f}),s.$set($)},i(f){k||(K(s.$$.fragment,f),k=!0)},o(f){U(s.$$.fragment,f),k=!1},d(f){f&&u(e),oe(s)}}}function Oe(o,e,l){let t,a;Ee(o,De,h=>l(4,a=h));let n=[],s=!0,k=null;Te(async()=>{try{l(0,n=await we.getMessages())}catch(h){console.log("Error loading messages:",h),l(2,k=h instanceof Error?h.message:"Failed to load messages")}finally{l(1,s=!1)}});const f=()=>window.location.reload();return o.$$.update=()=>{o.$$.dirty&16&&l(3,t=a)},[n,s,k,t,a,f]}class xe extends be{constructor(e){super(),$e(this,e,Oe,ze,ke,{})}}export{xe as component};
