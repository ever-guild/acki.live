import{S as oe,i as ne,s as ae,n as L,d,a as V,b,c as p,r as c,B as ce,h as M,e as m,f as v,g as C,k as D,j as k,t as B,l as ue,w as fe,C as I,D as j,A as z,E as re,F as J}from"../chunks/CzNs0Yqu.js";import{e as U,u as se,d as ie}from"../chunks/DkTL_JUw.js";import"../chunks/IHki7fMi.js";import{t as de}from"../chunks/DxM2ZuwZ.js";function K(f,e,t){const r=f.slice();r[11]=e[t];const s=r[3].includes(r[11].id);r[12]=s;const n=r[12]?r[11].popits:r[11].popits.slice(0,4);return r[13]=n,r}function Q(f,e,t){const r=f.slice();return r[16]=e[t],r}function he(f){let e,t=[],r=new Map,s=U(f[0]);const n=l=>l[11].id;for(let l=0;l<s.length;l+=1){let i=K(f,s,l),o=n(i);r.set(o,t[l]=$(o,i))}return{c(){e=k("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=m(l,"DIV",{class:!0});var i=v(e);for(let o=0;o<t.length;o+=1)t[o].l(i);i.forEach(d),this.h()},h(){c(e,"class","grid grid-cols-1 lg:grid-cols-2 gap-6")},m(l,i){b(l,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(l,i){i&41&&(s=U(l[0]),t=se(t,i,n,1,l,s,r,e,ie,$,null,K))},d(l){l&&d(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function pe(f){let e,t="<p>No buckets available</p>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(r){e=m(r,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1hsipts"&&(e.innerHTML=t),this.h()},h(){c(e,"class","text-center py-12 text-secondary")},m(r,s){b(r,e,s)},p:L,d(r){r&&d(e)}}}function _e(f){let e,t,r="Error",s,n,l;return{c(){e=k("div"),t=k("p"),t.textContent=r,s=D(),n=k("p"),l=B(f[2]),this.h()},l(i){e=m(i,"DIV",{class:!0});var o=v(e);t=m(o,"P",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1x93v7e"&&(t.textContent=r),s=M(o),n=m(o,"P",{});var a=v(n);l=C(a,f[2]),a.forEach(d),o.forEach(d),this.h()},h(){c(t,"class","font-bold"),c(e,"class","bg-red-100 dark:bg-red-900/20 border border-red-400 text-red-700 dark:text-red-400 px-4 py-3 rounded")},m(i,o){b(i,e,o),p(e,t),p(e,s),p(e,n),p(n,l)},p(i,o){o&4&&V(l,i[2])},d(i){i&&d(e)}}}function ve(f){let e,t,r,s,n,l,i,o=f[4]("app.loading")+"",a;return{c(){e=k("div"),t=k("div"),r=j("svg"),s=j("circle"),n=j("path"),l=D(),i=k("p"),a=B(o),this.h()},l(u){e=m(u,"DIV",{class:!0});var h=v(e);t=m(h,"DIV",{class:!0});var _=v(t);r=I(_,"svg",{class:!0,viewBox:!0});var g=v(r);s=I(g,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),v(s).forEach(d),n=I(g,"path",{class:!0,fill:!0,d:!0}),v(n).forEach(d),g.forEach(d),l=M(_),i=m(_,"P",{class:!0});var S=v(i);a=C(S,o),S.forEach(d),_.forEach(d),h.forEach(d),this.h()},h(){c(s,"class","opacity-25"),c(s,"cx","12"),c(s,"cy","12"),c(s,"r","10"),c(s,"stroke","currentColor"),c(s,"stroke-width","4"),c(s,"fill","none"),c(n,"class","opacity-75"),c(n,"fill","currentColor"),c(n,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),c(r,"class","animate-spin h-12 w-12 mx-auto mb-4 text-primary-600"),c(r,"viewBox","0 0 24 24"),c(i,"class","text-secondary"),c(t,"class","text-center"),c(e,"class","flex items-center justify-center py-12")},m(u,h){b(u,e,h),p(e,t),p(t,r),p(r,s),p(r,n),p(t,l),p(t,i),p(i,a)},p(u,h){h&16&&o!==(o=u[4]("app.loading")+"")&&V(a,o)},d(u){u&&d(e)}}}function W(f){let e,t,r;function s(o,a){return o[12]?ke:me}let n=s(f),l=n(f);function i(){return f[7](f[11])}return{c(){e=k("button"),l.c(),this.h()},l(o){e=m(o,"BUTTON",{type:!0,class:!0});var a=v(e);l.l(a),a.forEach(d),this.h()},h(){c(e,"type","button"),c(e,"class","hidden sm:flex items-center gap-2 text-sm font-medium text-secondary hover:text-primary transition-colors")},m(o,a){b(o,e,a),l.m(e,null),t||(r=re(e,"click",i),t=!0)},p(o,a){f=o,n===(n=s(f))&&l?l.p(f,a):(l.d(1),l=n(f),l&&(l.c(),l.m(e,null)))},d(o){o&&d(e),l.d(),t=!1,r()}}}function me(f){let e,t,r=f[11].popits.length-4+"",s,n,l,i,o;return{c(){e=k("span"),t=B("Show "),s=B(r),n=B(" More"),l=D(),i=j("svg"),o=j("path"),this.h()},l(a){e=m(a,"SPAN",{});var u=v(e);t=C(u,"Show "),s=C(u,r),n=C(u," More"),u.forEach(d),l=M(a),i=I(a,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var h=v(i);o=I(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(o).forEach(d),h.forEach(d),this.h()},h(){c(o,"stroke-linecap","round"),c(o,"stroke-linejoin","round"),c(o,"stroke-width","2"),c(o,"d","M19 9l-7 7-7-7"),c(i,"class","w-4 h-4"),c(i,"fill","none"),c(i,"stroke","currentColor"),c(i,"viewBox","0 0 24 24")},m(a,u){b(a,e,u),p(e,t),p(e,s),p(e,n),b(a,l,u),b(a,i,u),p(i,o)},p(a,u){u&1&&r!==(r=a[11].popits.length-4+"")&&V(s,r)},d(a){a&&(d(e),d(l),d(i))}}}function ke(f){let e,t="Show Less",r,s,n;return{c(){e=k("span"),e.textContent=t,r=D(),s=j("svg"),n=j("path"),this.h()},l(l){e=m(l,"SPAN",{"data-svelte-h":!0}),z(e)!=="svelte-1jen808"&&(e.textContent=t),r=M(l),s=I(l,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var i=v(s);n=I(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(n).forEach(d),i.forEach(d),this.h()},h(){c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"stroke-width","2"),c(n,"d","M5 15l7-7 7 7"),c(s,"class","w-4 h-4"),c(s,"fill","none"),c(s,"stroke","currentColor"),c(s,"viewBox","0 0 24 24")},m(l,i){b(l,e,i),b(l,r,i),b(l,s,i),p(s,n)},p:L,d(l){l&&(d(e),d(r),d(s))}}}function X(f){let e,t,r,s=f[16].minted+"",n;return{c(){e=k("div"),t=k("span"),r=B("Minted: "),n=B(s),this.h()},l(l){e=m(l,"DIV",{class:!0});var i=v(e);t=m(i,"SPAN",{class:!0});var o=v(t);r=C(o,"Minted: "),n=C(o,s),o.forEach(d),i.forEach(d),this.h()},h(){c(t,"class","font-semibold"),c(e,"class","absolute bottom-0 left-0 right-0 bg-black/70 text-white px-2 py-1 text-xs text-center backdrop-blur-sm")},m(l,i){b(l,e,i),p(e,t),p(t,r),p(t,n)},p(l,i){i&9&&s!==(s=l[16].minted+"")&&V(n,s)},d(l){l&&d(e)}}}function Y(f,e){let t,r,s,n,l,i,o,a=e[16].minted&&X(e);return{key:f,first:null,c(){t=k("a"),r=k("img"),l=D(),a&&a.c(),i=D(),this.h()},l(u){t=m(u,"A",{href:!0,target:!0,rel:!0,class:!0});var h=v(t);r=m(h,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),l=M(h),a&&a.l(h),i=M(h),h.forEach(d),this.h()},h(){J(r.src,s=ee(e[16].file_s3_id))||c(r,"src",s),c(r,"alt",n="Popit "+e[16].file_s3_id),c(r,"class","w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"),c(r,"loading","lazy"),c(t,"href",o=le(e[16].id)),c(t,"target","_blank"),c(t,"rel","noopener noreferrer"),c(t,"class","relative aspect-square group overflow-hidden rounded-lg border border-custom block"),this.first=t},m(u,h){b(u,t,h),p(t,r),p(t,l),a&&a.m(t,null),p(t,i)},p(u,h){e=u,h&9&&!J(r.src,s=ee(e[16].file_s3_id))&&c(r,"src",s),h&9&&n!==(n="Popit "+e[16].file_s3_id)&&c(r,"alt",n),e[16].minted?a?a.p(e,h):(a=X(e),a.c(),a.m(t,i)):a&&(a.d(1),a=null),h&9&&o!==(o=le(e[16].id))&&c(t,"href",o)},d(u){u&&d(t),a&&a.d()}}}function Z(f){let e,t,r;function s(o,a){return o[12]?be:ge}let n=s(f),l=n(f);function i(){return f[8](f[11])}return{c(){e=k("button"),l.c(),this.h()},l(o){e=m(o,"BUTTON",{type:!0,class:!0});var a=v(e);l.l(a),a.forEach(d),this.h()},h(){c(e,"type","button"),c(e,"class","sm:hidden w-full px-4 py-3 text-center text-secondary hover:text-primary transition-colors flex items-center justify-center gap-2 border-t border-custom bg-tertiary/50 hover:bg-tertiary")},m(o,a){b(o,e,a),l.m(e,null),t||(r=re(e,"click",i),t=!0)},p(o,a){f=o,n===(n=s(f))&&l?l.p(f,a):(l.d(1),l=n(f),l&&(l.c(),l.m(e,null)))},d(o){o&&d(e),l.d(),t=!1,r()}}}function ge(f){let e,t,r=f[11].popits.length-4+"",s,n,l,i,o;return{c(){e=k("span"),t=B("Show "),s=B(r),n=B(" More"),l=D(),i=j("svg"),o=j("path"),this.h()},l(a){e=m(a,"SPAN",{class:!0});var u=v(e);t=C(u,"Show "),s=C(u,r),n=C(u," More"),u.forEach(d),l=M(a),i=I(a,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var h=v(i);o=I(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(o).forEach(d),h.forEach(d),this.h()},h(){c(e,"class","text-sm font-medium"),c(o,"stroke-linecap","round"),c(o,"stroke-linejoin","round"),c(o,"stroke-width","2"),c(o,"d","M19 9l-7 7-7-7"),c(i,"class","w-4 h-4"),c(i,"fill","none"),c(i,"stroke","currentColor"),c(i,"viewBox","0 0 24 24")},m(a,u){b(a,e,u),p(e,t),p(e,s),p(e,n),b(a,l,u),b(a,i,u),p(i,o)},p(a,u){u&1&&r!==(r=a[11].popits.length-4+"")&&V(s,r)},d(a){a&&(d(e),d(l),d(i))}}}function be(f){let e,t="Show Less",r,s,n;return{c(){e=k("span"),e.textContent=t,r=D(),s=j("svg"),n=j("path"),this.h()},l(l){e=m(l,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-3floim"&&(e.textContent=t),r=M(l),s=I(l,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var i=v(s);n=I(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(n).forEach(d),i.forEach(d),this.h()},h(){c(e,"class","text-sm font-medium"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"stroke-width","2"),c(n,"d","M5 15l7-7 7 7"),c(s,"class","w-4 h-4"),c(s,"fill","none"),c(s,"stroke","currentColor"),c(s,"viewBox","0 0 24 24")},m(l,i){b(l,e,i),b(l,r,i),b(l,s,i),p(s,n)},p:L,d(l){l&&(d(e),d(r),d(s))}}}function $(f,e){let t,r,s,n,l,i=te(e[11].expire_at)+"",o,a,u,h,_,g=[],S=new Map,T,A,y=e[11].popits.length>4&&W(e),N=U(e[13]);const F=E=>E[16].file_s3_id;for(let E=0;E<N.length;E+=1){let w=Q(e,N,E),P=F(w);S.set(P,g[E]=Y(P,w))}let x=e[11].popits.length>4&&Z(e);return{key:f,first:null,c(){t=k("div"),r=k("div"),s=k("div"),n=k("p"),l=B("⏱️ "),o=B(i),a=D(),y&&y.c(),u=D(),h=k("div"),_=k("div");for(let E=0;E<g.length;E+=1)g[E].c();T=D(),x&&x.c(),A=D(),this.h()},l(E){t=m(E,"DIV",{class:!0});var w=v(t);r=m(w,"DIV",{class:!0});var P=v(r);s=m(P,"DIV",{class:!0});var H=v(s);n=m(H,"P",{class:!0});var O=v(n);l=C(O,"⏱️ "),o=C(O,i),O.forEach(d),a=M(H),y&&y.l(H),H.forEach(d),P.forEach(d),u=M(w),h=m(w,"DIV",{class:!0});var R=v(h);_=m(R,"DIV",{class:!0});var G=v(_);for(let q=0;q<g.length;q+=1)g[q].l(G);G.forEach(d),R.forEach(d),T=M(w),x&&x.l(w),A=M(w),w.forEach(d),this.h()},h(){c(n,"class","text-lg font-bold text-primary flex-1 text-center sm:text-left"),c(s,"class","flex items-center justify-between"),c(r,"class","px-4 py-4 border-b border-custom bg-tertiary"),c(_,"class","grid grid-cols-2 sm:grid-cols-4 gap-3"),c(h,"class","p-4"),c(t,"class","bg-secondary border border-custom rounded-lg shadow-lg overflow-hidden"),this.first=t},m(E,w){b(E,t,w),p(t,r),p(r,s),p(s,n),p(n,l),p(n,o),p(s,a),y&&y.m(s,null),p(t,u),p(t,h),p(h,_);for(let P=0;P<g.length;P+=1)g[P]&&g[P].m(_,null);p(t,T),x&&x.m(t,null),p(t,A)},p(E,w){e=E,w&1&&i!==(i=te(e[11].expire_at)+"")&&V(o,i),e[11].popits.length>4?y?y.p(e,w):(y=W(e),y.c(),y.m(s,null)):y&&(y.d(1),y=null),w&9&&(N=U(e[13]),g=se(g,w,F,1,e,N,S,_,ie,Y,null,Q)),e[11].popits.length>4?x?x.p(e,w):(x=Z(e),x.c(),x.m(t,A)):x&&(x.d(1),x=null)},d(E){E&&d(t),y&&y.d();for(let w=0;w<g.length;w+=1)g[w].d();x&&x.d()}}}function we(f){let e,t,r,s=f[4]("nav.buckets")+"",n,l;function i(u,h){return u[1]?ve:u[2]?_e:u[0].length===0?pe:he}let o=i(f),a=o(f);return{c(){e=D(),t=k("div"),r=k("h1"),n=B(s),l=D(),a.c(),this.h()},l(u){ce("svelte-tczsf8",document.head).forEach(d),e=M(u),t=m(u,"DIV",{class:!0});var _=v(t);r=m(_,"H1",{class:!0});var g=v(r);n=C(g,s),g.forEach(d),l=M(_),a.l(_),_.forEach(d),this.h()},h(){document.title="Buckets - acki.live",c(r,"class","text-3xl font-bold text-primary mb-6"),c(t,"class","max-w-7xl mx-auto")},m(u,h){b(u,e,h),b(u,t,h),p(t,r),p(r,n),p(t,l),a.m(t,null)},p(u,[h]){h&16&&s!==(s=u[4]("nav.buckets")+"")&&V(n,s),o===(o=i(u))&&a?a.p(u,h):(a.d(1),a=o(u),a&&(a.c(),a.m(t,null)))},i:L,o:L,d(u){u&&(d(e),d(t)),a.d()}}}const ye="https://popits.acki.live/buckets.json",Ee="https://popits-temp.popit.network/";function ee(f){const e=f.split("_"),t=e.length>1?e[1]:f;return`${Ee}${t}`}function te(f){const e=new Date,r=new Date(f).getTime()-e.getTime();if(r<=0)return"Expired";const s=Math.floor(r/6e4),n=Math.floor(s/60),l=Math.floor(n/24);if(l>0){const i=n%24;return`${l}d ${i}h left`}else if(n>0){const i=s%60;return`${n}h ${i}m left`}else return`${s}m left`}function le(f){return`https://t.ackinacki.com?startapp=${btoa(JSON.stringify({referrer:"giarmul",popit:f}))}`}function xe(f,e,t){let r,s;ue(f,de,_=>t(6,s=_));let n=[],l=!0,i="",o=[];fe(async()=>{try{const _=await fetch(ye);if(!_.ok)throw new Error("Failed to fetch buckets");const g=await _.json();t(0,n=g.map(S=>({...S,popits:[...S.popits].sort((T,A)=>{const y=parseInt(T.minted||"0");return parseInt(A.minted||"0")-y})})))}catch(_){t(2,i=_ instanceof Error?_.message:"Failed to load buckets"),console.error("Error fetching buckets:",_)}finally{t(1,l=!1)}});function a(_){o.includes(_)?t(3,o=o.filter(g=>g!==_)):t(3,o=[...o,_])}const u=_=>a(_.id),h=_=>a(_.id);return f.$$.update=()=>{f.$$.dirty&64&&t(4,r=s)},[n,l,i,o,r,a,s,u,h]}class Ie extends oe{constructor(e){super(),ne(this,e,xe,we,ae,{})}}export{Ie as component};
