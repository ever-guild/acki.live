import{S as he,i as de,s as me,d as h,m as se,o as O,p as R,a as I,b as K,c as n,q as le,r as d,e as m,f as k,g as q,h as M,u as ae,j as _,t as N,k as A,v as re,l as _e,A as pe,x as ie,y as fe,n as ee,B as ve,z as X,w as ue}from"../chunks/CNJda8uQ.js";import{e as te}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{g as ge}from"../chunks/D9BD8Bbg.js";import{t as be}from"../chunks/BdDW1rPr.js";import{C as ke}from"../chunks/CfYlJ1R9.js";import{S as $e}from"../chunks/DQgIh5d3.js";import{L as Ee}from"../chunks/C3sr4rvl.js";function ne(o,e,s){const t=o.slice();return t[9]=e[s],t}function Te(o,e,s){const t=o.slice();return t[6]=e[s],t[8]=s,t}function xe(o){let e,s,t,l,f=o[3]("messages.sender")+"",c,$,a,i=o[3]("messages.recipient")+"",b,T,L,y=o[3]("messages.type")+"",D,x,g,P="Value",S,V,B=o[3]("messages.timestamp")+"",z,j,H,w,F=te(o[0]),u=[];for(let r=0;r<F.length;r+=1)u[r]=oe(ne(o,F,r));const E=r=>O(u[r],1,1,()=>{u[r]=null});return{c(){e=_("table"),s=_("thead"),t=_("tr"),l=_("th"),c=N(f),$=A(),a=_("th"),b=N(i),T=A(),L=_("th"),D=N(y),x=A(),g=_("th"),g.textContent=P,S=A(),V=_("th"),z=N(B),j=A(),H=_("tbody");for(let r=0;r<u.length;r+=1)u[r].c();this.h()},l(r){e=m(r,"TABLE",{class:!0});var p=k(e);s=m(p,"THEAD",{class:!0});var v=k(s);t=m(v,"TR",{});var C=k(t);l=m(C,"TH",{class:!0});var Y=k(l);c=q(Y,f),Y.forEach(h),$=M(C),a=m(C,"TH",{class:!0});var G=k(a);b=q(G,i),G.forEach(h),T=M(C),L=m(C,"TH",{class:!0});var J=k(L);D=q(J,y),J.forEach(h),x=M(C),g=m(C,"TH",{class:!0,"data-svelte-h":!0}),X(g)!=="svelte-uwxecl"&&(g.textContent=P),S=M(C),V=m(C,"TH",{class:!0});var Q=k(V);z=q(Q,B),Q.forEach(h),C.forEach(h),v.forEach(h),j=M(p),H=m(p,"TBODY",{class:!0});var W=k(H);for(let U=0;U<u.length;U+=1)u[U].l(W);W.forEach(h),p.forEach(h),this.h()},h(){d(l,"class","table-th"),d(a,"class","table-th"),d(L,"class","table-th"),d(g,"class","table-th"),d(V,"class","table-th"),d(s,"class","table-header"),d(H,"class","table-body"),d(e,"class","data-table")},m(r,p){K(r,e,p),n(e,s),n(s,t),n(t,l),n(l,c),n(t,$),n(t,a),n(a,b),n(t,T),n(t,L),n(L,D),n(t,x),n(t,g),n(t,S),n(t,V),n(V,z),n(e,j),n(e,H);for(let v=0;v<u.length;v+=1)u[v]&&u[v].m(H,null);w=!0},p(r,p){if((!w||p&8)&&f!==(f=r[3]("messages.sender")+"")&&I(c,f),(!w||p&8)&&i!==(i=r[3]("messages.recipient")+"")&&I(b,i),(!w||p&8)&&y!==(y=r[3]("messages.type")+"")&&I(D,y),(!w||p&8)&&B!==(B=r[3]("messages.timestamp")+"")&&I(z,B),p&1){F=te(r[0]);let v;for(v=0;v<F.length;v+=1){const C=ne(r,F,v);u[v]?(u[v].p(C,p),R(u[v],1)):(u[v]=oe(C),u[v].c(),R(u[v],1),u[v].m(H,null))}for(ie(),v=F.length;v<u.length;v+=1)E(v);fe()}},i(r){if(!w){for(let p=0;p<F.length;p+=1)R(u[p]);w=!0}},o(r){u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)O(u[p]);w=!1},d(r){r&&h(e),ue(u,r)}}}function we(o){let e,s,t='<svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',l,f,c="Failed to load messages",$,a,i,b,T,L="Retry",y,D;return{c(){e=_("div"),s=_("div"),s.innerHTML=t,l=A(),f=_("h3"),f.textContent=c,$=A(),a=_("p"),i=N(o[2]),b=A(),T=_("button"),T.textContent=L,this.h()},l(x){e=m(x,"DIV",{class:!0});var g=k(e);s=m(g,"DIV",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-1k06uvz"&&(s.innerHTML=t),l=M(g),f=m(g,"H3",{class:!0,"data-svelte-h":!0}),X(f)!=="svelte-1lqfsqb"&&(f.textContent=c),$=M(g),a=m(g,"P",{class:!0});var P=k(a);i=q(P,o[2]),P.forEach(h),b=M(g),T=m(g,"BUTTON",{class:!0,"data-svelte-h":!0}),X(T)!=="svelte-f1anlk"&&(T.textContent=L),g.forEach(h),this.h()},h(){d(s,"class","text-red-500 mb-4"),d(f,"class","text-lg font-semibold mb-2"),d(a,"class","text-muted mb-4"),d(T,"class","px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition-colors"),d(e,"class","p-8 text-center")},m(x,g){K(x,e,g),n(e,s),n(e,l),n(e,f),n(e,$),n(e,a),n(a,i),n(e,b),n(e,T),y||(D=ve(T,"click",o[5]),y=!0)},p(x,g){g&4&&I(i,x[2])},i:ee,o:ee,d(x){x&&h(e),y=!1,D()}}}function ye(o){let e,s;return e=new $e({props:{$$slots:{default:[De]},$$scope:{ctx:o}}}),{c(){re(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,l){le(e,t,l),s=!0},p(t,l){const f={};l&4096&&(f.$$scope={dirty:l,ctx:t}),e.$set(f)},i(t){s||(R(e.$$.fragment,t),s=!0)},o(t){O(e.$$.fragment,t),s=!1},d(t){se(e,t)}}}function oe(o){let e,s,t,l=Z(o[9].from)+"",f,c,$,a,i,b=Z(o[9].to)+"",T,L,y,D,x=o[9].type+"",g,P,S,V,B=ce(o[9].value)+"",z,j,H,w,F,u;return w=new Ee({props:{timestamp:Math.floor(o[9].timestamp.getTime()/1e3),className:"time-text"}}),{c(){e=_("tr"),s=_("td"),t=_("a"),f=N(l),$=A(),a=_("td"),i=_("span"),T=N(b),L=A(),y=_("td"),D=_("span"),g=N(x),P=A(),S=_("td"),V=_("span"),z=N(B),j=A(),H=_("td"),re(w.$$.fragment),F=A(),this.h()},l(E){e=m(E,"TR",{class:!0});var r=k(e);s=m(r,"TD",{class:!0});var p=k(s);t=m(p,"A",{href:!0,class:!0});var v=k(t);f=q(v,l),v.forEach(h),p.forEach(h),$=M(r),a=m(r,"TD",{class:!0});var C=k(a);i=m(C,"SPAN",{class:!0});var Y=k(i);T=q(Y,b),Y.forEach(h),C.forEach(h),L=M(r),y=m(r,"TD",{class:!0});var G=k(y);D=m(G,"SPAN",{class:!0});var J=k(D);g=q(J,x),J.forEach(h),G.forEach(h),P=M(r),S=m(r,"TD",{class:!0});var Q=k(S);V=m(Q,"SPAN",{class:!0});var W=k(V);z=q(W,B),W.forEach(h),Q.forEach(h),j=M(r),H=m(r,"TD",{class:!0});var U=k(H);ae(w.$$.fragment,U),U.forEach(h),F=M(r),r.forEach(h),this.h()},h(){d(t,"href",c="/messages/"+o[9].id),d(t,"class","address-text hover:text-primary-600"),d(s,"class","table-td"),d(i,"class","address-text"),d(a,"class","table-td"),d(D,"class","text-primary-500 font-medium"),d(y,"class","table-td"),d(V,"class","font-semibold text-primary"),d(S,"class","table-td"),d(H,"class","table-td"),d(e,"class","table-row")},m(E,r){K(E,e,r),n(e,s),n(s,t),n(t,f),n(e,$),n(e,a),n(a,i),n(i,T),n(e,L),n(e,y),n(y,D),n(D,g),n(e,P),n(e,S),n(S,V),n(V,z),n(e,j),n(e,H),le(w,H,null),n(e,F),u=!0},p(E,r){(!u||r&1)&&l!==(l=Z(E[9].from)+"")&&I(f,l),(!u||r&1&&c!==(c="/messages/"+E[9].id))&&d(t,"href",c),(!u||r&1)&&b!==(b=Z(E[9].to)+"")&&I(T,b),(!u||r&1)&&x!==(x=E[9].type+"")&&I(g,x),(!u||r&1)&&B!==(B=ce(E[9].value)+"")&&I(z,B);const p={};r&1&&(p.timestamp=Math.floor(E[9].timestamp.getTime()/1e3)),w.$set(p)},i(E){u||(R(w.$$.fragment,E),u=!0)},o(E){O(w.$$.fragment,E),u=!1},d(E){E&&h(e),se(w)}}}function Ce(o){let e,s='<div class="skeleton skeleton-text w-24"></div> <div class="skeleton skeleton-text w-24"></div> <div class="skeleton skeleton-text w-20"></div> <div class="skeleton skeleton-text flex-1"></div> <div class="skeleton skeleton-text w-24"></div> ';return{c(){e=_("div"),e.innerHTML=s,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1uqwzfx"&&(e.innerHTML=s),this.h()},h(){d(e,"class","flex gap-4")},m(t,l){K(t,e,l)},p:ee,d(t){t&&h(e)}}}function De(o){let e,s=te(Array(10)),t=[];for(let l=0;l<s.length;l+=1)t[l]=Ce(Te(o,s,l));return{c(){e=_("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=m(l,"DIV",{class:!0});var f=k(e);for(let c=0;c<t.length;c+=1)t[c].l(f);f.forEach(h),this.h()},h(){d(e,"class","p-6 space-y-4")},m(l,f){K(l,e,f);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p:ee,d(l){l&&h(e),ue(t,l)}}}function He(o){let e,s,t,l;const f=[ye,we,xe],c=[];function $(a,i){return a[1]?0:a[2]?1:2}return s=$(o),t=c[s]=f[s](o),{c(){e=_("div"),t.c(),this.h()},l(a){e=m(a,"DIV",{class:!0});var i=k(e);t.l(i),i.forEach(h),this.h()},h(){d(e,"class","table-wrapper")},m(a,i){K(a,e,i),c[s].m(e,null),l=!0},p(a,i){let b=s;s=$(a),s===b?c[s].p(a,i):(ie(),O(c[b],1,1,()=>{c[b]=null}),fe(),t=c[s],t?t.p(a,i):(t=c[s]=f[s](a),t.c()),R(t,1),t.m(e,null))},i(a){l||(R(t),l=!0)},o(a){O(t),l=!1},d(a){a&&h(e),c[s].d()}}}function Me(o){let e,s,t=o[3]("messages.title")+"",l,f,c,$;return c=new ke({props:{$$slots:{default:[He]},$$scope:{ctx:o}}}),{c(){e=_("div"),s=_("h1"),l=N(t),f=A(),re(c.$$.fragment),this.h()},l(a){e=m(a,"DIV",{class:!0});var i=k(e);s=m(i,"H1",{class:!0});var b=k(s);l=q(b,t),b.forEach(h),f=M(i),ae(c.$$.fragment,i),i.forEach(h),this.h()},h(){d(s,"class","page-title"),d(e,"class","page-container")},m(a,i){K(a,e,i),n(e,s),n(s,l),n(e,f),le(c,e,null),$=!0},p(a,[i]){(!$||i&8)&&t!==(t=a[3]("messages.title")+"")&&I(l,t);const b={};i&4111&&(b.$$scope={dirty:i,ctx:a}),c.$set(b)},i(a){$||(R(c.$$.fragment,a),$=!0)},o(a){O(c.$$.fragment,a),$=!1},d(a){a&&h(e),se(c)}}}function Z(o){return`${o.substring(0,8)}...${o.substring(o.length-6)}`}function ce(o){if(!o||o==="0")return"0";const e=parseFloat(o);return e>=1e9?`${(e/1e9).toFixed(2)}B`:e>=1e6?`${(e/1e6).toFixed(2)}M`:e>=1e3?`${(e/1e3).toFixed(2)}K`:e.toFixed(4)}function Ae(o,e,s){let t,l;_e(o,be,i=>s(4,l=i));let f=[],c=!0,$=null;pe(async()=>{try{s(0,f=await ge())}catch(i){s(2,$=i instanceof Error?i.message:"Failed to load messages")}finally{s(1,c=!1)}});const a=()=>window.location.reload();return o.$$.update=()=>{o.$$.dirty&16&&s(3,t=l)},[f,c,$,t,l,a]}class Pe extends he{constructor(e){super(),de(this,e,Ae,Me,me,{})}}export{Pe as component};
